<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Filtres de Nettoyage des Données de Rendement • yieldcleanr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Filtres de Nettoyage des Données de Rendement">
<meta name="description" content="Outils pour nettoyer les données de rendement agricole / Tools for cleaning agricultural yield data">
<style>
.lang-toggle { cursor: pointer; padding: 8px 12px; }
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const langToggle = document.getElementById('lang-toggle');
  if (langToggle) {
    langToggle.addEventListener('click', function(e) {
      e.preventDefault();
      const currentPath = window.location.pathname;
      const isEn = currentPath.includes('/en/') || currentPath.endsWith('_en.html');
      let newPath;
      if (isEn) {
        newPath = currentPath.replace('/en/', '/fr/').replace('_en.html', '_fr.html');
      } else {
        newPath = currentPath.replace('/fr/', '/en/').replace('_fr.html', '_en.html');
      }
      if (newPath !== currentPath) {
        window.location.href = newPath;
      }
    });
  }
});
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">yieldcleanr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Référence</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Nouveautés</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cedricbouffard/yieldcleanr">GitHub</a></li>
<li class="nav-item"><a class="nav-link lang-toggle" id="lang-toggle" href="../#">FR | EN</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Filtres de Nettoyage des Données de Rendement</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cedricbouffard/yieldcleanr/blob/main/vignettes/filtres_nettoyage_en.Rmd" class="external-link"><code>vignettes/filtres_nettoyage_en.Rmd</code></a></small>
      <div class="d-none name"><code>filtres_nettoyage_en.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Le package <strong>yieldcleanr</strong> propose plusieurs filtres
pour nettoyer les données de rendement agricole. Chaque filtre cible un
type spécifique de problème dans les données. Cette vignette documente
chaque filtre en détail.</p>
</div>
<div class="section level2">
<h2 id="filtres-de-base">Filtres de Base<a class="anchor" aria-label="anchor" href="#filtres-de-base"></a>
</h2>
<div class="section level3">
<h3 id="filtre-header-status-filter_header_status">Filtre Header Status (<code>filter_header_status</code>)<a class="anchor" aria-label="anchor" href="#filtre-header-status-filter_header_status"></a>
</h3>
<p>Ce filtre garde uniquement les points où la moissonneuse est en
position de travail active.</p>
<p>Il permet d’exclure les manoeuvres, les demi-tours et les phases où
la coupe est relevee. Dans la pratique, c’est souvent le premier filtre
a appliquer pour eviter d’introduire des rendements nuls ou aberrants
dans les calculs.</p>
<p><strong>HeaderStatus :</strong> - <strong>1</strong> = Harvesting
actif - <strong>33</strong> = Header abaissé (actif) -
<strong>0</strong> = Header levé (inactif, sera éliminé)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cedricbouffard/yieldcleanr" class="external-link">yieldcleanr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span></span>
<span><span class="co"># Charger les données d'exemple</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_yield_data.html">read_yield_data</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sample1.txt"</span>, package <span class="op">=</span> <span class="st">"yieldcleanr"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Distance detectee en pouces (moyenne: 53.6 ) - conversion en metres</span></span>
<span><span class="co">#&gt; Swath detecte en pouces (moyenne: 288 ) - conversion en metres</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Avant filtrage:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, <span class="st">"lignes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Avant filtrage: 21917 lignes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"HeaderStatus avant:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">HeaderStatus</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; HeaderStatus avant: 1, 0</span></span>
<span></span>
<span><span class="co"># Appliquer le filtre header status</span></span>
<span><span class="va">data_filtered</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_header_status.html">filter_header_status</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Header Status filter: 788 points elimines (header non actif, valeurs acceptees:</span></span>
<span><span class="co">#&gt; 1, 33 )</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Après filtrage:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_filtered</span><span class="op">)</span>, <span class="st">"lignes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Après filtrage: 21129 lignes</span></span></code></pre></div>
<p><strong>Paramètres :</strong> | Paramètre | Description | Défaut |
|———–|————-|——–| | <code>header_values</code> | Valeurs acceptées pour
header actif | <code>c(1, 33)</code> |</p>
<hr>
</div>
<div class="section level3">
<h3 id="filtre-gps-status-filter_gps_status">Filtre GPS Status (<code>filter_gps_status</code>)<a class="anchor" aria-label="anchor" href="#filtre-gps-status-filter_gps_status"></a>
</h3>
<p>Élimine les points avec un signal GPS de mauvaise qualité.</p>
<p>Un signal GPS degrade provoque des sauts de position qui faussent la
vitesse et les polygones. Ce filtre stabilise la trajectoire en excluant
les relevés les moins fiables.</p>
<p><strong>Valeurs GPSStatus courantes :</strong> - 4-7 = Bon signal -
1-3 = Signal faible</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Créer des données de test avec GPSStatus variable (8 premiers points)</span></span>
<span><span class="va">data_test</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>GPSStatus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Avant filtrage:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_test</span><span class="op">)</span>, <span class="st">"lignes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Avant filtrage: 8 lignes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"GPSStatus avant:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">data_test</span><span class="op">$</span><span class="va">GPSStatus</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; GPSStatus avant: 2, 4, 5, 7, 4, 3, 6, 4</span></span>
<span></span>
<span><span class="co"># Filtrer avec GPSStatus &gt;= 4</span></span>
<span><span class="va">data_gps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_gps_status.html">filter_gps_status</a></span><span class="op">(</span><span class="va">data_test</span>, min_gps_status <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; GPS Status filter: 2 points elimines (GPS status &lt; 4 )</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Après filtrage (GPS &gt;= 4):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_gps</span><span class="op">)</span>, <span class="st">"lignes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Après filtrage (GPS &gt;= 4): 6 lignes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"GPSStatus après:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">data_gps</span><span class="op">$</span><span class="va">GPSStatus</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; GPSStatus après: 4, 5, 7, 4, 6, 4</span></span></code></pre></div>
<hr>
</div>
<div class="section level3">
<h3 id="filtre-dop-filter_dop">Filtre DOP (<code>filter_dop</code>)<a class="anchor" aria-label="anchor" href="#filtre-dop-filter_dop"></a>
</h3>
<p>Élimine les points avec une mauvaise précision GPS (Dilution of
Precision).</p>
<p>Le DOP mesure la geometrie des satellites : plus il est eleve, plus
la position est incertaine. En limitant le DOP, on reduit les points
isoles qui degradent les cartes de rendement.</p>
<p>Un DOP élevé (&gt; 10) indique une mauvaise géométrie satellite et
donc une position imprécise.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Créer des données de test avec DOP variable (8 premiers points)</span></span>
<span><span class="va">data_test</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>DOP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">15</span>, <span class="fl">8</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">12</span>, <span class="fl">3</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Avant filtrage:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_test</span><span class="op">)</span>, <span class="st">"lignes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Avant filtrage: 8 lignes</span></span>
<span></span>
<span><span class="co"># Filtrer avec DOP &lt;= 10</span></span>
<span><span class="va">data_dop</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_dop.html">filter_dop</a></span><span class="op">(</span><span class="va">data_test</span>, max_dop <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; DOP filter: 2 points elimines (DOP &gt; 10 )</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Après filtrage (DOP &lt;= 10):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_dop</span><span class="op">)</span>, <span class="st">"lignes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Après filtrage (DOP &lt;= 10): 6 lignes</span></span></code></pre></div>
<hr>
</div>
<div class="section level3">
<h3 id="filtre-vitesse-filter_velocity">Filtre Vitesse (<code>filter_velocity</code>)<a class="anchor" aria-label="anchor" href="#filtre-vitesse-filter_velocity"></a>
</h3>
<p>Filtre les points selon la vitesse de déplacement de la
moissonneuse.</p>
<p>Les vitesses tres faibles correspondent souvent a des arrets ou des
debuts de passage. Les vitesses tres elevees signalent des erreurs GPS
ou des points mal synchronises. Adapter la plage de vitesse au type de
culture et a la vitesse de travail reelle.</p>
<p><strong>Plage de vitesse typique :</strong> 0.5 - 10 m/s</p>
<p>Les vitesses trop faibles (&lt; 0.5 m/s) indiquent souvent un arrêt.
Les vitesses excessives (&gt; 10 m/s) peuvent indiquer des erreurs
GPS.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Les données doivent d'abord être converties en UTM</span></span>
<span><span class="va">data_utm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/latlon_to_utm.html">latlon_to_utm</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Zone UTM detectee: 15</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Données converties en UTM:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Données converties en UTM:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  X range:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">data_utm</span><span class="op">$</span><span class="va">X</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span>, <span class="st">"-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">data_utm</span><span class="op">$</span><span class="va">X</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   X range: 477128 - 477929</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Y range:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">data_utm</span><span class="op">$</span><span class="va">Y</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span>, <span class="st">"-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">data_utm</span><span class="op">$</span><span class="va">Y</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Y range: 4349765 - 4350292</span></span>
<span></span>
<span><span class="co"># Filtrer par vélocité (0.5 - 10 m/s)</span></span>
<span><span class="va">data_vel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_velocity.html">filter_velocity</a></span><span class="op">(</span><span class="va">data_utm</span>, min_velocity <span class="op">=</span> <span class="fl">0.5</span>, max_velocity <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; Velocity filter: 26 points elimines (vitesse hors plage: 0.5 - 10 )</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points conservés après filtre vélocité:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_vel</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points conservés après filtre vélocité: 21891</span></span></code></pre></div>
<hr>
</div>
<div class="section level3">
<h3 id="filtre-des-limites-filter_bounds">Filtre des Limites (<code>filter_bounds</code>)<a class="anchor" aria-label="anchor" href="#filtre-des-limites-filter_bounds"></a>
</h3>
<p>Élimine les points qui sont à l’extérieur des limites géographiques
du champ.</p>
<p>Ce filtre s’appuie sur des bornes definies a partir du contour du
champ ou des quantiles de position. Il est efficace pour retirer les
points collectes hors parcelle.</p>
<p>Utile pour éliminer les “flyers” GPS ou les données collectées
avant/après la récolte.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Définir les limites du champ (en UTM)</span></span>
<span><span class="va">bounds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  min_x <span class="op">=</span> <span class="fl">434840</span>,</span>
<span>  max_x <span class="op">=</span> <span class="fl">435995</span>,</span>
<span>  min_y <span class="op">=</span> <span class="fl">5261127</span>,</span>
<span>  max_y <span class="op">=</span> <span class="fl">5262262</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filtrer</span></span>
<span><span class="va">data_bounds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_bounds.html">filter_bounds</a></span><span class="op">(</span><span class="va">data_utm</span>, bounds <span class="op">=</span> <span class="va">bounds</span>, coord_type <span class="op">=</span> <span class="st">"utm"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Bounds filter: 21917 points elimines (hors limites du champ)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points dans les limites du champ:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_bounds</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points dans les limites du champ: 0</span></span></code></pre></div>
<hr>
</div>
<div class="section level3">
<h3 id="filtre-de-plage-de-rendement-filter_yield_range">Filtre de Plage de Rendement (<code>filter_yield_range</code>)<a class="anchor" aria-label="anchor" href="#filtre-de-plage-de-rendement-filter_yield_range"></a>
</h3>
<p>Élimine les points avec des rendements hors plage.</p>
<p>Le filtrage de plage supprime les valeurs physiquement impossibles ou
incoherentes. Il peut etre regle manuellement par culture ou
automatiquement via l’ecart-type.</p>
<p><strong>Plages de rendement typiques :</strong> - Maïs : 50 - 350
bu/acre - Soja : 15 - 80 bu/acre</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Les données doivent d'abord avoir une colonne de rendement</span></span>
<span><span class="va">data_yield</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convert_flow_to_yield.html">convert_flow_to_yield</a></span><span class="op">(</span><span class="va">data_utm</span><span class="op">)</span></span>
<span><span class="co">#&gt; Yield calcule: 81059 bu/acre (lbs/bu = 60 )</span></span>
<span></span>
<span><span class="co"># Filtrer avec une plage de rendement raisonnable pour le maïs</span></span>
<span><span class="va">data_yield_filtered</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_yield_range.html">filter_yield_range</a></span><span class="op">(</span></span>
<span>  <span class="va">data_yield</span>,</span>
<span>  min_yield <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  max_yield <span class="op">=</span> <span class="fl">350</span>,</span>
<span>  yield_column <span class="op">=</span> <span class="st">"Yield_buacre"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Yield range filter: 21905 points elimines (rendement hors plage: 50 - 350 )</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points après filtre rendement (50-350 bu/acre):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_yield_filtered</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points après filtre rendement (50-350 bu/acre): 0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Rendement moyen:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">data_yield_filtered</span><span class="op">$</span><span class="va">Yield_buacre</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"bu/acre\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rendement moyen: NaN bu/acre</span></span></code></pre></div>
<hr>
</div>
<div class="section level3">
<h3 id="filtre-de-plage-dhumidite-filter_moisture_range">Filtre de Plage d’Humidite (<code>filter_moisture_range</code>)<a class="anchor" aria-label="anchor" href="#filtre-de-plage-dhumidite-filter_moisture_range"></a>
</h3>
<p>Filtre les points selon le taux d’humidité du grain.</p>
<p>L’humidite peut deriver en fin de journee ou lors des changements de
variete. Ce filtre supprime les extremes qui perturbent les conversions
et les seuils de rendement.</p>
<p><strong>Plages d’humidite typiques :</strong> - Maïs : 10 - 40% -
Soja : 8 - 20%</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Créer des données de test avec humidité variable (8 premiers points)</span></span>
<span><span class="va">data_test</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Moisture <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">15</span>, <span class="fl">35</span>, <span class="fl">45</span>, <span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">12</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Avant filtrage:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_test</span><span class="op">)</span>, <span class="st">"lignes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Avant filtrage: 8 lignes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Humidité avant:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">data_test</span><span class="op">$</span><span class="va">Moisture</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Humidité avant: 5, 15, 35, 45, 25, 30, 12, 20</span></span>
<span></span>
<span><span class="co"># Filtrer pour le maïs (10-40%)</span></span>
<span><span class="va">data_moisture</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_moisture_range.html">filter_moisture_range</a></span><span class="op">(</span><span class="va">data_test</span>, min_moisture <span class="op">=</span> <span class="fl">10</span>, max_moisture <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span>
<span><span class="co">#&gt; Moisture range filter: 2 points elimines (humidite hors plage: 10 - 40 )</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Après filtrage (10-40%):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_moisture</span><span class="op">)</span>, <span class="st">"lignes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Après filtrage (10-40%): 6 lignes</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="filtres-avancés">Filtres Avancés<a class="anchor" aria-label="anchor" href="#filtres-avanc%C3%A9s"></a>
</h2>
<div class="section level3">
<h3 id="suppression-du-chevauchement-remove_overlap">Suppression du Chevauchement (<code>remove_overlap</code>)<a class="anchor" aria-label="anchor" href="#suppression-du-chevauchement-remove_overlap"></a>
</h3>
<p>Élimine les points de chevauchement en utilisant une grille
spatiale.</p>
<p>Lorsque plusieurs passages se recouvrent, certaines zones sont
sur-echantillonnees. Le filtre de chevauchement retire les cellules trop
denses pour mieux representer la couverture reelle de la recolte.</p>
<p>Les zones de chevauchement (passes successives sur la même zone) sont
identifiées et les points en excès sont éliminés.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Appliquer le filtre overlap</span></span>
<span><span class="va">data_overlap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remove_overlap.html">remove_overlap</a></span><span class="op">(</span><span class="va">data_utm</span>, cellsize <span class="op">=</span> <span class="fl">0.3</span>, max_pass <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="co">#&gt; Overlap filter complete: Cellsize: 0.3 Max Pass: 50 - 0 points elimines</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points après suppression overlap:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_overlap</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points après suppression overlap: 21917</span></span></code></pre></div>
<p><strong>Paramètres :</strong> | Paramètre | Description | Défaut |
|———–|————-|——–| | <code>cellsize</code> | Taille des cellules de grille
(mètres) | 0.3 | | <code>max_pass</code> | Nombre max de passages avant
élimination | 50 |</p>
<hr>
</div>
<div class="section level3">
<h3 id="filtre-et-local-filter_local_std">Filtre ET Local (<code>filter_local_std</code>)<a class="anchor" aria-label="anchor" href="#filtre-et-local-filter_local_std"></a>
</h3>
<p>Élimine les points aberrants en utilisant un voisinage de passages
adjacents.</p>
<p>Ce filtre compare chaque point a la moyenne locale de son passage. Il
est utile pour enlever les pics ponctuels tout en preservant les
variations reelles.</p>
<p>Les points dont le rendement s’écarte de plus de
<code>std_limit</code> écarts-types de la moyenne locale sont
éliminés.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Créer des données de test avec un outlier (8 premiers points)</span></span>
<span><span class="va">data_test</span> <span class="op">&lt;-</span> <span class="va">data_utm</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    Flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">150</span>, <span class="fl">155</span>, <span class="fl">152</span>, <span class="fl">148</span>, <span class="fl">600</span>, <span class="fl">151</span>, <span class="fl">149</span><span class="op">)</span>,  <span class="co"># 600 = outlier</span></span>
<span>    .row_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Avant filtrage STD local:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Avant filtrage STD local:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">data_test</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">.row_id</span>, <span class="va">Flow</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 2</span></span></span>
<span><span class="co">#&gt;   .row_id  Flow</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1    10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       2   150</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       3   155</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       4   152</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>       5   148</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>       6   600</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>       7   151</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span>       8   149</span></span>
<span></span>
<span><span class="co"># Appliquer le filtre</span></span>
<span><span class="va">data_std</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_local_std.html">filter_local_std</a></span><span class="op">(</span><span class="va">data_test</span>, swath_window <span class="op">=</span> <span class="fl">5</span>, std_limit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Local STD Filter complete: Swath : 5 STDLimit : 3 - 0 points elimines</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nAprès filtrage STD local:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Après filtrage STD local:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">data_std</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">.row_id</span>, <span class="va">Flow</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 2</span></span></span>
<span><span class="co">#&gt;   .row_id  Flow</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1    10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       2   150</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       3   155</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       4   152</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>       5   148</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>       6   600</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>       7   151</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span>       8   149</span></span></code></pre></div>
<hr>
</div>
<div class="section level3">
<h3 id="filtre-fenetre-glissante-filter_sliding_window">Filtre Fenetre Glissante (<code>filter_sliding_window</code>)<a class="anchor" aria-label="anchor" href="#filtre-fenetre-glissante-filter_sliding_window"></a>
</h3>
<p>Applique un filtre à fenêtre glissante pour éliminer les valeurs
aberrantes basées sur les voisins temporels.</p>
<p>Il agit comme un lissage temporel : les valeurs trop eloignees de la
tendance locale sont retirees. Utile lorsque les anomalies sont courtes
mais frequentes.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Créer des données de test</span></span>
<span><span class="va">data_test</span> <span class="op">&lt;-</span> <span class="va">data_utm</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    Flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">150</span>, <span class="fl">152</span>, <span class="fl">155</span>, <span class="fl">158</span>, <span class="fl">500</span>, <span class="fl">153</span>, <span class="fl">151</span>, <span class="fl">149</span><span class="op">)</span>,  <span class="co"># 500 = outlier</span></span>
<span>    .row_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Appliquer le filtre</span></span>
<span><span class="va">data_sliding</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_sliding_window.html">filter_sliding_window</a></span><span class="op">(</span><span class="va">data_test</span>, window_size <span class="op">=</span> <span class="fl">5</span>, n_std <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="filtres-de-correction-de-position">Filtres de Correction de Position<a class="anchor" aria-label="anchor" href="#filtres-de-correction-de-position"></a>
</h2>
<div class="section level3">
<h3 id="filtre-de-position-apply_position_filter">Filtre de Position (<code>apply_position_filter</code>)<a class="anchor" aria-label="anchor" href="#filtre-de-position-apply_position_filter"></a>
</h3>
<p>Élimine les “flyers” GPS en utilisant une enveloppe
inter-quantile.</p>
<p>Ce filtre construit une enveloppe spatiale et elimine les points tres
eloignes. Il est souvent applique apres la conversion UTM pour
stabiliser la geometrie.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculer les seuils automatiques</span></span>
<span><span class="va">thresholds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_auto_thresholds.html">calculate_auto_thresholds</a></span><span class="op">(</span><span class="va">data_utm</span><span class="op">)</span></span>
<span><span class="co">#&gt; === Automatic Threshold Calculation (AYCE) ===</span></span>
<span><span class="co">#&gt; Yield: Flow MIN = 0 MAX = 19.48</span></span>
<span><span class="co">#&gt; Velocity: MIN = 0.5 MAX = 2.89</span></span>
<span><span class="co">#&gt; Position: X[ 477042 - 477999 ]</span></span>
<span><span class="co">#&gt; Position: Y[ 4349680 - 4350386 ]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Position envelope:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Position envelope:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  X:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">thresholds</span><span class="op">$</span><span class="va">pos_x_min</span>, <span class="fl">0</span><span class="op">)</span>, <span class="st">"-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">thresholds</span><span class="op">$</span><span class="va">pos_x_max</span>, <span class="fl">0</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   X: 477042 - 477999</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Y:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">thresholds</span><span class="op">$</span><span class="va">pos_y_min</span>, <span class="fl">0</span><span class="op">)</span>, <span class="st">"-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">thresholds</span><span class="op">$</span><span class="va">pos_y_max</span>, <span class="fl">0</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Y: 4349680 - 4350386</span></span>
<span></span>
<span><span class="co"># Appliquer le filtre</span></span>
<span><span class="va">data_pos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/apply_position_filter.html">apply_position_filter</a></span><span class="op">(</span><span class="va">data_utm</span>, <span class="va">thresholds</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nPoints après filtre position:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_pos</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Points après filtre position: 21917</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="filtres-de-correction-de-délai">Filtres de Correction de Délai<a class="anchor" aria-label="anchor" href="#filtres-de-correction-de-d%C3%A9lai"></a>
</h2>
<div class="section level3">
<h3 id="correction-du-delai-de-flux-apply_flow_delay">Correction du Delai de Flux (<code>apply_flow_delay</code>)<a class="anchor" aria-label="anchor" href="#correction-du-delai-de-flux-apply_flow_delay"></a>
</h3>
<p>Compense le délai entre le capteur de flux et la position GPS.</p>
<p>Un delai incorrect decale la position des rendements et produit des
bandes obliques. Ce correctif aligne le flux et la position afin
d’ameliorer la coherence spatiale.</p>
<p>Le flux de grain est décalé temporellement pour correspondre à la
position.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Créer des données de test</span></span>
<span><span class="va">data_test</span> <span class="op">&lt;-</span> <span class="va">data_utm</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>.row_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Avant correction délai:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_test</span><span class="op">)</span>, <span class="st">"lignes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Avant correction délai: 20 lignes</span></span>
<span></span>
<span><span class="co"># Appliquer une correction de délai de 2 observations</span></span>
<span><span class="va">data_delay</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/apply_flow_delay.html">apply_flow_delay</a></span><span class="op">(</span><span class="va">data_test</span>, delay <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Flow delay correction: 2 seconds, 2 points elimines (valeurs NA)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Après correction délai (2s):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_delay</span><span class="op">)</span>, <span class="st">"lignes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Après correction délai (2s): 18 lignes</span></span></code></pre></div>
<hr>
</div>
<div class="section level3">
<h3 id="correction-du-delai-dhumidite-apply_moisture_delay">Correction du Delai d’Humidite
(<code>apply_moisture_delay</code>)<a class="anchor" aria-label="anchor" href="#correction-du-delai-dhumidite-apply_moisture_delay"></a>
</h3>
<p>Compense le délai entre la mesure d’humidité et la position GPS.</p>
<p>L’humidite est souvent mesuree avec un decalage plus long que le
flux. Cette correction aligne les courbes d’humidite avec la position
pour des analyses fiables.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Appliquer une correction de délai de 15 observations</span></span>
<span><span class="va">data_moist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/apply_moisture_delay.html">apply_moisture_delay</a></span><span class="op">(</span><span class="va">data_test</span>, delay <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="filtres-ayce-spécialisés">Filtres AYCE Spécialisés<a class="anchor" aria-label="anchor" href="#filtres-ayce-sp%C3%A9cialis%C3%A9s"></a>
</h2>
<div class="section level3">
<h3 id="filtre-de-chevauchement-bitmap-apply_overlap_filter">Filtre de Chevauchement Bitmap
(<code>apply_overlap_filter</code>)<a class="anchor" aria-label="anchor" href="#filtre-de-chevauchement-bitmap-apply_overlap_filter"></a>
</h3>
<p>Implémente la méthode rasterisée de Han et al. (1997) pour détecter
et éliminer les zones de chevauchement.</p>
<p>Ce filtre calcule un ratio de chevauchement pour chaque point et
elimine les zones recoltees plusieurs fois. Il est plus fin que
<code>remove_overlap</code> sur des donnees denses.</p>
<p>Ce filtre est plus sophistiqué que <code>remove_overlap</code> car il
calcule le ratio de chevauchement pour chaque point.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Appliquer le filtre overlap bitmap</span></span>
<span><span class="va">data_bitmap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/apply_overlap_filter.html">apply_overlap_filter</a></span><span class="op">(</span><span class="va">data_utm</span>, cellsize <span class="op">=</span> <span class="fl">0.3</span>, overlap_threshold <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="co">#&gt; === Bitmap Overlap Filter ===</span></span>
<span><span class="co">#&gt; Donnees etendues - utilisation du bitmap sparse</span></span>
<span><span class="co">#&gt; Overlap ratio: min 0 max 1</span></span>
<span><span class="co">#&gt; Overlap filter: 3 points elimines (0%)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points après filtre overlap bitmap:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_bitmap</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points après filtre overlap bitmap: 21914</span></span></code></pre></div>
<hr>
</div>
<div class="section level3">
<h3 id="filtre-et-localise-apply_local_sd_filter">Filtre ET Localise (<code>apply_local_sd_filter</code>)<a class="anchor" aria-label="anchor" href="#filtre-et-localise-apply_local_sd_filter"></a>
</h3>
<p>Crée une grille spatiale et élimine les points aberrants basés sur
l’écart-type local.</p>
<p>La methode s’appuie sur une grille fixe plutot que sur les passages,
ce qui la rend plus robuste lorsque les passages sont mal identifies ou
tres irreguliers.</p>
<p>Plus sophistiqué que <code>filter_local_std</code> car il utilise une
grille spatiale plutôt que des passages.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Appliquer le filtre SD localisé</span></span>
<span><span class="va">data_lsd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/apply_local_sd_filter.html">apply_local_sd_filter</a></span><span class="op">(</span><span class="va">data_utm</span>, n_swaths <span class="op">=</span> <span class="fl">5</span>, lsd_limit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; === Localized SD Filter ===</span></span>
<span><span class="co">#&gt; Local SD filter: 565 points elimines (2.6%)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points après filtre SD localisé:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_lsd</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points après filtre SD localisé: 21352</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="pipeline-complet-avec-ayce">Pipeline Complet avec AYCE<a class="anchor" aria-label="anchor" href="#pipeline-complet-avec-ayce"></a>
</h2>
<div class="section level3">
<h3 id="utilisation-combinée-des-filtres">Utilisation combinée des filtres<a class="anchor" aria-label="anchor" href="#utilisation-combin%C3%A9e-des-filtres"></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pipeline de nettoyage complet</span></span>
<span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sample1.txt"</span>, package <span class="op">=</span> <span class="st">"yieldcleanr"</span><span class="op">)</span></span>
<span><span class="va">data_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_yield_data.html">read_yield_data</a></span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span>
<span><span class="co">#&gt; Distance detectee en pouces (moyenne: 53.6 ) - conversion en metres</span></span>
<span><span class="co">#&gt; Swath detecte en pouces (moyenne: 288 ) - conversion en metres</span></span>
<span></span>
<span><span class="co"># Étape 1: Conversion UTM</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/latlon_to_utm.html">latlon_to_utm</a></span><span class="op">(</span><span class="va">data_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt; Zone UTM detectee: 15</span></span>
<span></span>
<span><span class="co"># Étape 2: Conversion rendement</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convert_flow_to_yield.html">convert_flow_to_yield</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Yield calcule: 81059 bu/acre (lbs/bu = 60 )</span></span>
<span></span>
<span><span class="co"># Étape 3: PCDI</span></span>
<span><span class="va">pcdi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/apply_pcdi.html">apply_pcdi</a></span><span class="op">(</span><span class="va">data</span>, delay_range <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">20</span>, n_iterations <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; === PCDI: Phase Correlation Delay Identification ( Flow ) ===</span></span>
<span><span class="co">#&gt; Delai optimal ( Flow ): 0 secondes</span></span>
<span><span class="co">#&gt; RSC a l'optimal : 0.2829</span></span>
<span><span class="co">#&gt; Stabilite (CV) : 0.001</span></span>
<span></span>
<span><span class="co"># Étape 4: Calcul seuils automatiques</span></span>
<span><span class="va">thresholds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_auto_thresholds.html">calculate_auto_thresholds</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; === Automatic Threshold Calculation (AYCE) ===</span></span>
<span><span class="co">#&gt; Yield: Yield_buacre MIN = 0 MAX = 192321.25</span></span>
<span><span class="co">#&gt; Velocity: MIN = 0.5 MAX = 2.89</span></span>
<span><span class="co">#&gt; Position: X[ 477042 - 477999 ]</span></span>
<span><span class="co">#&gt; Position: Y[ 4349680 - 4350386 ]</span></span>
<span></span>
<span><span class="co"># Étape 5: Appliquer les filtres</span></span>
<span><span class="va">data_clean</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/apply_position_filter.html">apply_position_filter</a></span><span class="op">(</span><span class="va">thresholds</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/filter_velocity.html">filter_velocity</a></span><span class="op">(</span><span class="va">thresholds</span><span class="op">$</span><span class="va">min_velocity</span>, <span class="va">thresholds</span><span class="op">$</span><span class="va">max_velocity</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/filter_yield_range.html">filter_yield_range</a></span><span class="op">(</span><span class="va">thresholds</span><span class="op">$</span><span class="va">min_yield</span>, <span class="va">thresholds</span><span class="op">$</span><span class="va">max_yield</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/apply_overlap_filter.html">apply_overlap_filter</a></span><span class="op">(</span>cellsize <span class="op">=</span> <span class="fl">0.3</span>, overlap_threshold <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/apply_local_sd_filter.html">apply_local_sd_filter</a></span><span class="op">(</span>n_swaths <span class="op">=</span> <span class="fl">5</span>, lsd_limit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; === Localized SD Filter ===</span></span>
<span><span class="co">#&gt; === Bitmap Overlap Filter ===</span></span>
<span><span class="co">#&gt; Velocity filter: 29 points elimines (vitesse hors plage: 0.5 - 2.88864430393987 )</span></span>
<span><span class="co">#&gt; Yield range filter: 2 points elimines (rendement hors plage: 0 - 192321.2 )</span></span>
<span><span class="co">#&gt; Donnees etendues - utilisation du bitmap sparse</span></span>
<span><span class="co">#&gt; Overlap ratio: min 0 max 1</span></span>
<span><span class="co">#&gt; Overlap filter: 1 points elimines (0%)</span></span>
<span><span class="co">#&gt; Local SD filter: 560 points elimines (2.6%)</span></span>
<span></span>
<span><span class="co"># Résumé</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"=== RÉSUMÉ DU NETTOYAGE ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; === RÉSUMÉ DU NETTOYAGE ===</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points bruts:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_raw</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points bruts: 21917</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points nettoyés:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_clean</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points nettoyés: 21313</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Taux de rétention:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_clean</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_raw</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Taux de rétention: 97.2 %</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Rendement moyen:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">data_clean</span><span class="op">$</span><span class="va">Yield_buacre</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"bu/acre\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rendement moyen: 82868 bu/acre</span></span>
<span></span>
<span><span class="co"># Histogramme</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">data_clean</span><span class="op">$</span><span class="va">Yield_buacre</span>, breaks <span class="op">=</span> <span class="fl">30</span>, col <span class="op">=</span> <span class="st">"#2C3E50"</span>, alpha <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Distribution du rendement nettoyé"</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Rendement (bu/acre)"</span>, ylab <span class="op">=</span> <span class="st">"Fréquence"</span><span class="op">)</span></span></code></pre></div>
<p><img src="filtres_nettoyage_en_files/figure-html/unnamed-chunk-17-1.png" class="r-plt" alt="" width="960"></p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="résumé-des-filtres">Résumé des Filtres<a class="anchor" aria-label="anchor" href="#r%C3%A9sum%C3%A9-des-filtres"></a>
</h2>
<table class="table">
<colgroup>
<col width="22%">
<col width="28%">
<col width="48%">
</colgroup>
<thead><tr class="header">
<th>Filtre</th>
<th>Fonction</th>
<th>Usage Principal</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Header Status</td>
<td><code><a href="../reference/filter_header_status.html">filter_header_status()</a></code></td>
<td>Éliminer points quand moissonneuse à l’arrêt</td>
</tr>
<tr class="even">
<td>GPS Status</td>
<td><code><a href="../reference/filter_gps_status.html">filter_gps_status()</a></code></td>
<td>Éliminer points avec mauvais signal GPS</td>
</tr>
<tr class="odd">
<td>DOP</td>
<td><code><a href="../reference/filter_dop.html">filter_dop()</a></code></td>
<td>Éliminer points avec faible précision GPS</td>
</tr>
<tr class="even">
<td>Velocity</td>
<td><code><a href="../reference/filter_velocity.html">filter_velocity()</a></code></td>
<td>Éliminer points avec vitesse anormale</td>
</tr>
<tr class="odd">
<td>Bounds</td>
<td><code><a href="../reference/filter_bounds.html">filter_bounds()</a></code></td>
<td>Éliminer points hors du champ</td>
</tr>
<tr class="even">
<td>Yield Range</td>
<td><code><a href="../reference/filter_yield_range.html">filter_yield_range()</a></code></td>
<td>Éliminer rendements aberrants</td>
</tr>
<tr class="odd">
<td>Moisture</td>
<td><code><a href="../reference/filter_moisture_range.html">filter_moisture_range()</a></code></td>
<td>Éliminer points avec humidité anormale</td>
</tr>
<tr class="even">
<td>Overlap</td>
<td><code><a href="../reference/remove_overlap.html">remove_overlap()</a></code></td>
<td>Éliminer chevauchements (grille simple)</td>
</tr>
<tr class="odd">
<td>Local STD</td>
<td><code><a href="../reference/filter_local_std.html">filter_local_std()</a></code></td>
<td>Éliminer outliers par voisinage</td>
</tr>
<tr class="even">
<td>Sliding Window</td>
<td><code><a href="../reference/filter_sliding_window.html">filter_sliding_window()</a></code></td>
<td>Éliminer outliers temporels</td>
</tr>
<tr class="odd">
<td>Position</td>
<td><code><a href="../reference/apply_position_filter.html">apply_position_filter()</a></code></td>
<td>Éliminer flyers GPS</td>
</tr>
<tr class="even">
<td>Flow Delay</td>
<td><code><a href="../reference/apply_flow_delay.html">apply_flow_delay()</a></code></td>
<td>Corriger délai flux-position</td>
</tr>
<tr class="odd">
<td>Moisture Delay</td>
<td><code><a href="../reference/apply_moisture_delay.html">apply_moisture_delay()</a></code></td>
<td>Corriger délai humidité-position</td>
</tr>
<tr class="even">
<td>Bitmap Overlap</td>
<td><code><a href="../reference/apply_overlap_filter.html">apply_overlap_filter()</a></code></td>
<td>Éliminer chevauchements (méthode raster)</td>
</tr>
<tr class="odd">
<td>Local SD</td>
<td><code><a href="../reference/apply_local_sd_filter.html">apply_local_sd_filter()</a></code></td>
<td>Éliminer outliers par grille spatiale</td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cedric Bouffard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
