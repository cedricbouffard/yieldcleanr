<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Guide Complet du Nettoyage de Donn√©es de Rendement ‚Ä¢ yieldcleanr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Guide Complet du Nettoyage de Donn√©es de Rendement">
<meta name="description" content="Outils pour nettoyer les donn√©es de rendement agricole / Tools for cleaning agricultural yield data">
<style>
.lang-toggle { cursor: pointer; padding: 8px 12px; }
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const langToggle = document.getElementById('lang-toggle');
  if (langToggle) {
    langToggle.addEventListener('click', function(e) {
      e.preventDefault();
      const currentPath = window.location.pathname;
      const isEn = currentPath.includes('/en/') || currentPath.endsWith('_en.html');
      let newPath;
      if (isEn) {
        newPath = currentPath.replace('/en/', '/fr/').replace('_en.html', '_en.html');
      } else {
        newPath = currentPath.replace('/fr/', '/en/').replace('_fr.html', '_en.html');
      }
      if (newPath !== currentPath) {
        window.location.href = newPath;
      }
    });
  }
});
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">yieldcleanr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">R√©f√©rence</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Nouveaut√©s</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cedricbouffard/yieldcleanr">GitHub</a></li>
<li class="nav-item"><a class="nav-link lang-toggle" id="lang-toggle" href="../#">FR | EN</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Guide Complet du Nettoyage de Donn√©es de Rendement</h1>
            <h3 data-toc-skip class="subtitle">Analyse d√©taill√©e des 4
√©chantillons avec yieldcleanr</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cedricbouffard/yieldcleanr/blob/main/vignettes/guide-complet-samples.Rmd" class="external-link"><code>vignettes/guide-complet-samples.Rmd</code></a></small>
      <div class="d-none name"><code>guide-complet-samples.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Ce guide pr√©sente une analyse compl√®te du nettoyage de donn√©es de
rendement agricole en utilisant le package <strong>yieldcleanr</strong>.
Nous analysons en d√©tail 4 √©chantillons de donn√©es r√©elles provenant de
moissonneuses-batteuses, en montrant l‚Äôeffet de chaque filtre du
pipeline AYCE (Auto Yield Cleaning Engine).</p>
<div class="section level3">
<h3 id="installation-et-chargement">Installation et chargement<a class="anchor" aria-label="anchor" href="#installation-et-chargement"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cedricbouffard/yieldcleanr" class="external-link">yieldcleanr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">gridExtra</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="vue-densemble-des-√©chantillons">Vue d‚Äôensemble des √©chantillons<a class="anchor" aria-label="anchor" href="#vue-densemble-des-%C3%A9chantillons"></a>
</h2>
<p>Le package inclut 4 fichiers de donn√©es d‚Äôexemple :</p>
<table class="table">
<thead><tr class="header">
<th>Fichier</th>
<th>Culture</th>
<th>Points bruts</th>
<th>Points nettoy√©s</th>
<th>R√©tention</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>sample1.txt</strong></td>
<td>Soja</td>
<td>21,917</td>
<td>21,011</td>
<td>95.9%</td>
</tr>
<tr class="even">
<td><strong>sample2.txt</strong></td>
<td>Ma√Øs</td>
<td>36,869</td>
<td>33,072</td>
<td>89.7%</td>
</tr>
<tr class="odd">
<td><strong>sample3.txt</strong></td>
<td>Ma√Øs</td>
<td>31,815</td>
<td>29,939</td>
<td>94.1%</td>
</tr>
<tr class="even">
<td><strong>sample4.txt</strong></td>
<td>Ma√Øs blanc</td>
<td>19,495</td>
<td>18,727</td>
<td>96.1%</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="analyse-d√©taill√©e-par-√©chantillon">Analyse d√©taill√©e par √©chantillon<a class="anchor" aria-label="anchor" href="#analyse-d%C3%A9taill%C3%A9e-par-%C3%A9chantillon"></a>
</h2>
<div class="section level3">
<h3 id="sample-1---soja">Sample 1 - Soja<a class="anchor" aria-label="anchor" href="#sample-1---soja"></a>
</h3>
<div class="section level4">
<h4 id="donn√©es-brutes">Donn√©es brutes<a class="anchor" aria-label="anchor" href="#donn%C3%A9es-brutes"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sample1.txt"</span>, package <span class="op">=</span> <span class="st">"yieldcleanr"</span><span class="op">)</span></span>
<span><span class="va">data_raw_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_yield_data.html">read_yield_data</a></span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"=== SAMPLE 1 - SOJA ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; === SAMPLE 1 - SOJA ===</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points bruts:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_raw_s1</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points bruts: 21917</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Flow (lbs/sec):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Flow (lbs/sec):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Moyenne:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">data_raw_s1</span><span class="op">$</span><span class="va">Flow</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Moyenne: 7.64</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  √âcart-type:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">data_raw_s1</span><span class="op">$</span><span class="va">Flow</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   √âcart-type: 1.9</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Min-Max:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">data_raw_s1</span><span class="op">$</span><span class="va">Flow</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"-"</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">data_raw_s1</span><span class="op">$</span><span class="va">Flow</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Min-Max: 0 - 12.61</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="pipeline-de-nettoyage-√©tape-par-√©tape">Pipeline de nettoyage √©tape par √©tape<a class="anchor" aria-label="anchor" href="#pipeline-de-nettoyage-%C3%A9tape-par-%C3%A9tape"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># √âtape 1: Conversion UTM et rendement</span></span>
<span><span class="va">data_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/latlon_to_utm.html">latlon_to_utm</a></span><span class="op">(</span><span class="va">data_raw_s1</span><span class="op">)</span></span>
<span><span class="va">data_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convert_flow_to_yield.html">convert_flow_to_yield</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nüìä APR√àS CONVERSION\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; üìä APR√àS CONVERSION</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Rendement moyen:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">$</span><span class="va">Yield_kg_ha</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"kg/ha\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rendement moyen: 3517 kg/ha</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"CV:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">$</span><span class="va">Yield_kg_ha</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">$</span><span class="va">Yield_kg_ha</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; CV: 24.8 %</span></span>
<span></span>
<span><span class="co"># √âtape 2: Delay Adjustment</span></span>
<span><span class="va">delay_result_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_delays.html">optimize_delays</a></span><span class="op">(</span><span class="va">data_s1</span>, type <span class="op">=</span> <span class="st">"flow"</span>, delay_range <span class="op">=</span> <span class="op">-</span><span class="fl">25</span><span class="op">:</span><span class="fl">25</span>, n_iterations <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nüîß Delay Adjustment - D√©lai optimal:"</span>, <span class="va">delay_result_s1</span><span class="op">$</span><span class="va">delays</span><span class="op">$</span><span class="va">flow</span>, <span class="st">"secondes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; üîß Delay Adjustment - D√©lai optimal: 3 secondes</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">delay_result_s1</span><span class="op">$</span><span class="va">data</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">data_s1</span> <span class="op">&lt;-</span> <span class="va">delay_result_s1</span><span class="op">$</span><span class="va">data</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points apr√®s correction d√©lai:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Points apr√®s correction d√©lai: 21905</span></span>
<span></span>
<span><span class="co"># √âtape 3: Seuils automatiques</span></span>
<span><span class="va">thresholds_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_thresholds.html">calculate_thresholds</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nüìà Seuils calcul√©s:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; üìà Seuils calcul√©s:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Vitesse:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">thresholds_s1</span><span class="op">$</span><span class="va">velocity</span><span class="op">$</span><span class="va">min_velocity</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">thresholds_s1</span><span class="op">$</span><span class="va">velocity</span><span class="op">$</span><span class="va">max_velocity</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"m/s\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Vitesse: 0.5 - 2.52 m/s</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Rendement:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">thresholds_s1</span><span class="op">$</span><span class="va">yield</span><span class="op">$</span><span class="va">min_yield</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">thresholds_s1</span><span class="op">$</span><span class="va">yield</span><span class="op">$</span><span class="va">max_yield</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"kg/ha\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Rendement: 1071.8 - 5958.6 kg/ha</span></span>
<span></span>
<span><span class="co"># √âtape 4-7: Filtres successifs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nüîß FILTRES APPLIQU√âS:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; üîß FILTRES APPLIQU√âS:</span></span>
<span></span>
<span><span class="co"># Filtre vitesse</span></span>
<span><span class="va">n_before</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span></span>
<span><span class="va">data_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_data.html">filter_data</a></span><span class="op">(</span><span class="va">data_s1</span>, type <span class="op">=</span> <span class="st">"velocity"</span>, </span>
<span>                       min_velocity <span class="op">=</span> <span class="va">thresholds_s1</span><span class="op">$</span><span class="va">velocity</span><span class="op">$</span><span class="va">min_velocity</span>, </span>
<span>                       max_velocity <span class="op">=</span> <span class="va">thresholds_s1</span><span class="op">$</span><span class="va">velocity</span><span class="op">$</span><span class="va">max_velocity</span><span class="op">)</span></span>
<span><span class="va">removed_vel</span> <span class="op">&lt;-</span> <span class="va">n_before</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Vitesse:"</span>, <span class="va">removed_vel</span>, <span class="st">"points retir√©s ("</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">removed_vel</span><span class="op">/</span><span class="va">n_before</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Vitesse: 34 points retir√©s ( 0.2 %)</span></span>
<span></span>
<span><span class="co"># Filtre humidit√©</span></span>
<span><span class="va">n_before</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span></span>
<span><span class="va">data_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_data.html">filter_data</a></span><span class="op">(</span><span class="va">data_s1</span>, type <span class="op">=</span> <span class="st">"moisture"</span>, n_std <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">removed_moist</span> <span class="op">&lt;-</span> <span class="va">n_before</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Humidit√©:"</span>, <span class="va">removed_moist</span>, <span class="st">"points retir√©s ("</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">removed_moist</span><span class="op">/</span><span class="va">n_before</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Humidit√©: 303 points retir√©s ( 1.4 %)</span></span>
<span></span>
<span><span class="co"># Filtre chevauchement</span></span>
<span><span class="va">n_before</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span></span>
<span><span class="va">data_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detect_anomalies.html">detect_anomalies</a></span><span class="op">(</span><span class="va">data_s1</span>, type <span class="op">=</span> <span class="st">"overlap"</span>, cellsize <span class="op">=</span> <span class="fl">0.3</span>, overlap_threshold <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">removed_overlap</span> <span class="op">&lt;-</span> <span class="va">n_before</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Chevauchement:"</span>, <span class="va">removed_overlap</span>, <span class="st">"points retir√©s ("</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">removed_overlap</span><span class="op">/</span><span class="va">n_before</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Chevauchement: 0 points retir√©s ( 0 %)</span></span>
<span></span>
<span><span class="co"># Filtre √©cart-type local</span></span>
<span><span class="va">n_before</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span></span>
<span><span class="va">data_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detect_anomalies.html">detect_anomalies</a></span><span class="op">(</span><span class="va">data_s1</span>, type <span class="op">=</span> <span class="st">"local_sd"</span>, n_swaths <span class="op">=</span> <span class="fl">5</span>, lsd_limit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">removed_lsd</span> <span class="op">&lt;-</span> <span class="va">n_before</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  √âcart-type local:"</span>, <span class="va">removed_lsd</span>, <span class="st">"points retir√©s ("</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">removed_lsd</span><span class="op">/</span><span class="va">n_before</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%)\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   √âcart-type local: 144 points retir√©s ( 0.7 %)</span></span>
<span></span>
<span><span class="co"># R√©sultat final</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nüìä R√âSULTAT FINAL\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; üìä R√âSULTAT FINAL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points nettoy√©s:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points nettoy√©s: 21424</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Taux de r√©tention:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_raw_s1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Taux de r√©tention: 97.8 %</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Rendement moyen:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">$</span><span class="va">Yield_kg_ha</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"kg/ha\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rendement moyen: 3538.1 kg/ha</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"CV final:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">$</span><span class="va">Yield_kg_ha</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">data_s1</span><span class="op">$</span><span class="va">Yield_kg_ha</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; CV final: 21.8 %</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="visualisation-avantapr√®s">Visualisation avant/apr√®s<a class="anchor" aria-label="anchor" href="#visualisation-avantapr%C3%A8s"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cr√©er les objets sf pour visualisation</span></span>
<span><span class="va">sf_raw</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">data_raw_s1</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Longitude"</span>, <span class="st">"Latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span><span class="va">sf_clean</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">data_s1</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Longitude"</span>, <span class="st">"Latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convertir Flow brut en kg/ha pour comparaison</span></span>
<span><span class="va">sf_raw</span><span class="op">$</span><span class="va">Yield_kg_ha</span> <span class="op">&lt;-</span> <span class="va">sf_raw</span><span class="op">$</span><span class="va">Flow</span> <span class="op">*</span> <span class="fl">0.453592</span> <span class="op">*</span> <span class="fl">3600</span> <span class="op">/</span> <span class="fl">4046</span> <span class="op">*</span> <span class="fl">1000</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"AVANT - Sample 1 (Soja)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/sample1-viz-1.png" class="r-plt" alt="" width="1152"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"APR√àS - Sample 1 (Soja)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/sample1-viz-2.png" class="r-plt" alt="" width="1152"></p>
</div>
</div>
<div class="section level3">
<h3 id="sample-2---ma√Øs">Sample 2 - Ma√Øs<a class="anchor" aria-label="anchor" href="#sample-2---ma%C3%AFs"></a>
</h3>
<div class="section level4">
<h4 id="donn√©es-brutes-1">Donn√©es brutes<a class="anchor" aria-label="anchor" href="#donn%C3%A9es-brutes-1"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sample2.txt"</span>, package <span class="op">=</span> <span class="st">"yieldcleanr"</span><span class="op">)</span></span>
<span><span class="va">data_raw_s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_yield_data.html">read_yield_data</a></span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"=== SAMPLE 2 - MA√èS ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; === SAMPLE 2 - MA√èS ===</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points bruts:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_raw_s2</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points bruts: 36869</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Flow (lbs/sec):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Flow (lbs/sec):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Moyenne:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">data_raw_s2</span><span class="op">$</span><span class="va">Flow</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Moyenne: 6.55</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  √âcart-type:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">data_raw_s2</span><span class="op">$</span><span class="va">Flow</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   √âcart-type: 3.63</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="pipeline-de-nettoyage">Pipeline de nettoyage<a class="anchor" aria-label="anchor" href="#pipeline-de-nettoyage"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/latlon_to_utm.html">latlon_to_utm</a></span><span class="op">(</span><span class="va">data_raw_s2</span><span class="op">)</span></span>
<span><span class="va">data_s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convert_flow_to_yield.html">convert_flow_to_yield</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Delay Adjustment avec d√©lai important</span></span>
<span><span class="va">delay_result_s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_delays.html">optimize_delays</a></span><span class="op">(</span><span class="va">data_s2</span>, type <span class="op">=</span> <span class="st">"flow"</span>, delay_range <span class="op">=</span> <span class="op">-</span><span class="fl">25</span><span class="op">:</span><span class="fl">25</span>, n_iterations <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"üîß Delay Adjustment - D√©lai optimal:"</span>, <span class="va">delay_result_s2</span><span class="op">$</span><span class="va">delays</span><span class="op">$</span><span class="va">flow</span>, <span class="st">"secondes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; üîß Delay Adjustment - D√©lai optimal: 13 secondes</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">delay_result_s2</span><span class="op">$</span><span class="va">data</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">n_before</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span></span>
<span>  <span class="va">data_s2</span> <span class="op">&lt;-</span> <span class="va">delay_result_s2</span><span class="op">$</span><span class="va">data</span></span>
<span>  <span class="va">removed_delay_adjustment</span> <span class="op">&lt;-</span> <span class="va">n_before</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points retir√©s par Delay Adjustment:"</span>, <span class="va">removed_delay_adjustment</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Points retir√©s par Delay Adjustment: 0</span></span>
<span></span>
<span><span class="va">thresholds_s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_thresholds.html">calculate_thresholds</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Application des filtres</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nüîß FILTRES APPLIQU√âS:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; üîß FILTRES APPLIQU√âS:</span></span>
<span></span>
<span><span class="va">n_before</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span></span>
<span><span class="va">data_s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_data.html">filter_data</a></span><span class="op">(</span><span class="va">data_s2</span>, type <span class="op">=</span> <span class="st">"velocity"</span>, </span>
<span>                       min_velocity <span class="op">=</span> <span class="va">thresholds_s2</span><span class="op">$</span><span class="va">velocity</span><span class="op">$</span><span class="va">min_velocity</span>, </span>
<span>                       max_velocity <span class="op">=</span> <span class="va">thresholds_s2</span><span class="op">$</span><span class="va">velocity</span><span class="op">$</span><span class="va">max_velocity</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Vitesse:"</span>, <span class="va">n_before</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span>, <span class="st">"points\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Vitesse: 699 points</span></span>
<span></span>
<span><span class="va">n_before</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span></span>
<span><span class="va">data_s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_data.html">filter_data</a></span><span class="op">(</span><span class="va">data_s2</span>, type <span class="op">=</span> <span class="st">"moisture"</span>, n_std <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Humidit√©:"</span>, <span class="va">n_before</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span>, <span class="st">"points\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Humidit√©: 147 points</span></span>
<span></span>
<span><span class="va">n_before</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span></span>
<span><span class="va">data_s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detect_anomalies.html">detect_anomalies</a></span><span class="op">(</span><span class="va">data_s2</span>, type <span class="op">=</span> <span class="st">"overlap"</span>, cellsize <span class="op">=</span> <span class="fl">0.3</span>, overlap_threshold <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Chevauchement:"</span>, <span class="va">n_before</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span>, <span class="st">"points\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Chevauchement: 0 points</span></span>
<span></span>
<span><span class="va">n_before</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span></span>
<span><span class="va">data_s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detect_anomalies.html">detect_anomalies</a></span><span class="op">(</span><span class="va">data_s2</span>, type <span class="op">=</span> <span class="st">"local_sd"</span>, n_swaths <span class="op">=</span> <span class="fl">5</span>, lsd_limit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  √âcart-type local:"</span>, <span class="va">n_before</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span>, <span class="st">"points\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   √âcart-type local: 1 points</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nüìä R√âSULTAT FINAL\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; üìä R√âSULTAT FINAL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points nettoy√©s:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points nettoy√©s: 32757</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Taux de r√©tention:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s2</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_raw_s2</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Taux de r√©tention: 88.8 %</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="visualisation-avantapr√®s-1">Visualisation avant/apr√®s<a class="anchor" aria-label="anchor" href="#visualisation-avantapr%C3%A8s-1"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cr√©er les objets sf pour visualisation</span></span>
<span><span class="va">sf_raw_s2</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">data_raw_s2</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Longitude"</span>, <span class="st">"Latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span><span class="va">sf_clean_s2</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">data_s2</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Longitude"</span>, <span class="st">"Latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convertir Flow brut en kg/ha pour comparaison</span></span>
<span><span class="va">sf_raw_s2</span><span class="op">$</span><span class="va">Yield_kg_ha</span> <span class="op">&lt;-</span> <span class="va">sf_raw_s2</span><span class="op">$</span><span class="va">Flow</span> <span class="op">*</span> <span class="fl">0.453592</span> <span class="op">*</span> <span class="fl">3600</span> <span class="op">/</span> <span class="fl">4046</span> <span class="op">*</span> <span class="fl">1000</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw_s2</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"AVANT - Sample 2 (Ma√Øs)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/sample2-viz-1.png" class="r-plt" alt="" width="1152"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean_s2</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"APR√àS - Sample 2 (Ma√Øs)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/sample2-viz-2.png" class="r-plt" alt="" width="1152"></p>
</div>
</div>
<div class="section level3">
<h3 id="sample-3---ma√Øs">Sample 3 - Ma√Øs<a class="anchor" aria-label="anchor" href="#sample-3---ma%C3%AFs"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sample3.txt"</span>, package <span class="op">=</span> <span class="st">"yieldcleanr"</span><span class="op">)</span></span>
<span><span class="va">data_raw_s3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_yield_data.html">read_yield_data</a></span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"=== SAMPLE 3 - MA√èS ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; === SAMPLE 3 - MA√èS ===</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points bruts:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_raw_s3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points bruts: 31815</span></span>
<span></span>
<span><span class="va">data_s3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/latlon_to_utm.html">latlon_to_utm</a></span><span class="op">(</span><span class="va">data_raw_s3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/convert_flow_to_yield.html">convert_flow_to_yield</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">delay_result_s3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_delays.html">optimize_delays</a></span><span class="op">(</span><span class="va">data_s3</span>, type <span class="op">=</span> <span class="st">"flow"</span>, delay_range <span class="op">=</span> <span class="op">-</span><span class="fl">25</span><span class="op">:</span><span class="fl">25</span>, n_iterations <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Delay Adjustment - D√©lai optimal:"</span>, <span class="va">delay_result_s3</span><span class="op">$</span><span class="va">delays</span><span class="op">$</span><span class="va">flow</span>, <span class="st">"secondes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Delay Adjustment - D√©lai optimal: 0 secondes</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">delay_result_s3</span><span class="op">$</span><span class="va">data</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">data_s3</span> <span class="op">&lt;-</span> <span class="va">delay_result_s3</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">thresholds_s3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_thresholds.html">calculate_thresholds</a></span><span class="op">(</span><span class="va">data_s3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_s3</span> <span class="op">&lt;-</span> <span class="va">data_s3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/filter_data.html">filter_data</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"velocity"</span>,</span>
<span>              min_velocity <span class="op">=</span> <span class="va">thresholds_s3</span><span class="op">$</span><span class="va">velocity</span><span class="op">$</span><span class="va">min_velocity</span>,</span>
<span>              max_velocity <span class="op">=</span> <span class="va">thresholds_s3</span><span class="op">$</span><span class="va">velocity</span><span class="op">$</span><span class="va">max_velocity</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/filter_data.html">filter_data</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"moisture"</span>, n_std <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/detect_anomalies.html">detect_anomalies</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"overlap"</span>, cellsize <span class="op">=</span> <span class="fl">0.3</span>, overlap_threshold <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/detect_anomalies.html">detect_anomalies</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"local_sd"</span>, n_swaths <span class="op">=</span> <span class="fl">5</span>, lsd_limit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points nettoy√©s:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points nettoy√©s: 29912</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Taux de r√©tention:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s3</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_raw_s3</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Taux de r√©tention: 94 %</span></span></code></pre></div>
<div class="section level4">
<h4 id="visualisation-avantapr√®s-2">Visualisation avant/apr√®s<a class="anchor" aria-label="anchor" href="#visualisation-avantapr%C3%A8s-2"></a>
</h4>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cr√©er les objets sf pour visualisation</span></span>
<span><span class="va">sf_raw_s3</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">data_raw_s3</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Longitude"</span>, <span class="st">"Latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span><span class="va">sf_clean_s3</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">data_s3</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Longitude"</span>, <span class="st">"Latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convertir Flow brut en kg/ha pour comparaison</span></span>
<span><span class="va">sf_raw_s3</span><span class="op">$</span><span class="va">Yield_kg_ha</span> <span class="op">&lt;-</span> <span class="va">sf_raw_s3</span><span class="op">$</span><span class="va">Flow</span> <span class="op">*</span> <span class="fl">0.453592</span> <span class="op">*</span> <span class="fl">3600</span> <span class="op">/</span> <span class="fl">4046</span> <span class="op">*</span> <span class="fl">1000</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw_s3</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"AVANT - Sample 3 (Ma√Øs)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/sample3-viz-1.png" class="r-plt" alt="" width="1152"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean_s3</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"APR√àS - Sample 3 (Ma√Øs)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/sample3-viz-2.png" class="r-plt" alt="" width="1152"></p>
</div>
</div>
<div class="section level3">
<h3 id="sample-4---ma√Øs-blanc">Sample 4 - Ma√Øs blanc<a class="anchor" aria-label="anchor" href="#sample-4---ma%C3%AFs-blanc"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sample4.txt"</span>, package <span class="op">=</span> <span class="st">"yieldcleanr"</span><span class="op">)</span></span>
<span><span class="va">data_raw_s4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_yield_data.html">read_yield_data</a></span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"=== SAMPLE 4 - MA√èS BLANC ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; === SAMPLE 4 - MA√èS BLANC ===</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points bruts:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_raw_s4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points bruts: 19495</span></span>
<span></span>
<span><span class="va">data_s4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/latlon_to_utm.html">latlon_to_utm</a></span><span class="op">(</span><span class="va">data_raw_s4</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/convert_flow_to_yield.html">convert_flow_to_yield</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">delay_result_s4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimize_delays.html">optimize_delays</a></span><span class="op">(</span><span class="va">data_s4</span>, type <span class="op">=</span> <span class="st">"flow"</span>, delay_range <span class="op">=</span> <span class="op">-</span><span class="fl">25</span><span class="op">:</span><span class="fl">25</span>, n_iterations <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Delay Adjustment - D√©lai optimal:"</span>, <span class="va">delay_result_s4</span><span class="op">$</span><span class="va">delays</span><span class="op">$</span><span class="va">flow</span>, <span class="st">"secondes\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Delay Adjustment - D√©lai optimal: 0 secondes</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">delay_result_s4</span><span class="op">$</span><span class="va">data</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">data_s4</span> <span class="op">&lt;-</span> <span class="va">delay_result_s4</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">thresholds_s4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_thresholds.html">calculate_thresholds</a></span><span class="op">(</span><span class="va">data_s4</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_s4</span> <span class="op">&lt;-</span> <span class="va">data_s4</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/filter_data.html">filter_data</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"velocity"</span>,</span>
<span>              min_velocity <span class="op">=</span> <span class="va">thresholds_s4</span><span class="op">$</span><span class="va">velocity</span><span class="op">$</span><span class="va">min_velocity</span>,</span>
<span>              max_velocity <span class="op">=</span> <span class="va">thresholds_s4</span><span class="op">$</span><span class="va">velocity</span><span class="op">$</span><span class="va">max_velocity</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/filter_data.html">filter_data</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"moisture"</span>, n_std <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/detect_anomalies.html">detect_anomalies</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"overlap"</span>, cellsize <span class="op">=</span> <span class="fl">0.3</span>, overlap_threshold <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/detect_anomalies.html">detect_anomalies</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"local_sd"</span>, n_swaths <span class="op">=</span> <span class="fl">5</span>, lsd_limit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Points nettoy√©s:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Points nettoy√©s: 18539</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Taux de r√©tention:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_s4</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_raw_s4</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Taux de r√©tention: 95.1 %</span></span></code></pre></div>
<div class="section level4">
<h4 id="visualisation-avantapr√®s-3">Visualisation avant/apr√®s<a class="anchor" aria-label="anchor" href="#visualisation-avantapr%C3%A8s-3"></a>
</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cr√©er les objets sf pour visualisation</span></span>
<span><span class="va">sf_raw_s4</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">data_raw_s4</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Longitude"</span>, <span class="st">"Latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span><span class="va">sf_clean_s4</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">data_s4</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Longitude"</span>, <span class="st">"Latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convertir Flow brut en kg/ha pour comparaison</span></span>
<span><span class="va">sf_raw_s4</span><span class="op">$</span><span class="va">Yield_kg_ha</span> <span class="op">&lt;-</span> <span class="va">sf_raw_s4</span><span class="op">$</span><span class="va">Flow</span> <span class="op">*</span> <span class="fl">0.453592</span> <span class="op">*</span> <span class="fl">3600</span> <span class="op">/</span> <span class="fl">4046</span> <span class="op">*</span> <span class="fl">1000</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw_s4</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"AVANT - Sample 4 (Ma√Øs blanc)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/sample4-viz-1.png" class="r-plt" alt="" width="1152"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean_s4</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"APR√àS - Sample 4 (Ma√Øs blanc)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/sample4-viz-2.png" class="r-plt" alt="" width="1152"></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="tableau-r√©capitulatif-complet">Tableau r√©capitulatif complet<a class="anchor" aria-label="anchor" href="#tableau-r%C3%A9capitulatif-complet"></a>
</h2>
<div class="section level3">
<h3 id="points-retir√©s-par-filtre">Points retir√©s par filtre<a class="anchor" aria-label="anchor" href="#points-retir%C3%A9s-par-filtre"></a>
</h3>
<table class="table">
<colgroup>
<col width="10%">
<col width="7%">
<col width="11%">
<col width="12%">
<col width="19%">
<col width="23%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th>Sample</th>
<th>Delay Adjustment</th>
<th>Vitesse</th>
<th>Humidit√©</th>
<th>Chevauchement</th>
<th>√âcart-type local</th>
<th><strong>Total</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Sample 1 (Soja)</strong></td>
<td>12</td>
<td>29</td>
<td>303</td>
<td>1</td>
<td>561</td>
<td><strong>906</strong></td>
</tr>
<tr class="even">
<td><strong>Sample 2 (Ma√Øs)</strong></td>
<td>3,265</td>
<td>366</td>
<td>153</td>
<td>0</td>
<td>13</td>
<td><strong>3,797</strong></td>
</tr>
<tr class="odd">
<td><strong>Sample 3 (Ma√Øs)</strong></td>
<td>0</td>
<td>490</td>
<td>425</td>
<td>4</td>
<td>0</td>
<td><strong>1,876</strong></td>
</tr>
<tr class="even">
<td><strong>Sample 4 (Ma√Øs blanc)</strong></td>
<td>0</td>
<td>539</td>
<td>210</td>
<td>8</td>
<td>0</td>
<td><strong>768</strong></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="comparaison-des-rendements">Comparaison des rendements<a class="anchor" aria-label="anchor" href="#comparaison-des-rendements"></a>
</h3>
<div class="section level4">
<h4 id="avant-nettoyage">Avant nettoyage<a class="anchor" aria-label="anchor" href="#avant-nettoyage"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th>Sample</th>
<th>Rendement moyen</th>
<th>√âcart-type</th>
<th>CV</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Sample 1 (Soja)</td>
<td>3,517 kg/ha</td>
<td>872 kg/ha</td>
<td>24.8%</td>
</tr>
<tr class="even">
<td>Sample 2 (Ma√Øs)</td>
<td>5,294 kg/ha</td>
<td>5,088 kg/ha</td>
<td>96.1%</td>
</tr>
<tr class="odd">
<td>Sample 3 (Ma√Øs)</td>
<td>7,912 kg/ha</td>
<td>7,054 kg/ha</td>
<td>89.2%</td>
</tr>
<tr class="even">
<td>Sample 4 (Ma√Øs blanc)</td>
<td>8,119 kg/ha</td>
<td>2,633 kg/ha</td>
<td>32.4%</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="apr√®s-nettoyage">Apr√®s nettoyage<a class="anchor" aria-label="anchor" href="#apr%C3%A8s-nettoyage"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th>Sample</th>
<th>Rendement moyen</th>
<th>√âcart-type</th>
<th>CV</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Sample 1 (Soja)</td>
<td>3,596 kg/ha</td>
<td>657 kg/ha</td>
<td><strong>18.3%</strong></td>
</tr>
<tr class="even">
<td>Sample 2 (Ma√Øs)</td>
<td>5,224 kg/ha</td>
<td>2,315 kg/ha</td>
<td><strong>44.3%</strong></td>
</tr>
<tr class="odd">
<td>Sample 3 (Ma√Øs)</td>
<td>7,854 kg/ha</td>
<td>4,719 kg/ha</td>
<td><strong>60.1%</strong></td>
</tr>
<tr class="even">
<td>Sample 4 (Ma√Øs blanc)</td>
<td>8,202 kg/ha</td>
<td>2,482 kg/ha</td>
<td><strong>30.3%</strong></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="cartes-de-comparaison-compl√®tes">Cartes de comparaison compl√®tes<a class="anchor" aria-label="anchor" href="#cartes-de-comparaison-compl%C3%A8tes"></a>
</h3>
<div class="section level4">
<h4 id="vue-densemble---tous-les-√©chantillons-avant-nettoyage">Vue d‚Äôensemble - Tous les √©chantillons (AVANT nettoyage)<a class="anchor" aria-label="anchor" href="#vue-densemble---tous-les-%C3%A9chantillons-avant-nettoyage"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cr√©er une comparaison de tous les √©chantillons avant nettoyage</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 1 - Soja (AVANT)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/all-samples-raw-map-1.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw_s2</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 2 - Ma√Øs (AVANT)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/all-samples-raw-map-2.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw_s3</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 3 - Ma√Øs (AVANT)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/all-samples-raw-map-3.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw_s4</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 4 - Ma√Øs blanc (AVANT)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/all-samples-raw-map-4.png" class="r-plt" alt="" width="1344"></p>
</div>
<div class="section level4">
<h4 id="vue-densemble---tous-les-√©chantillons-apr√®s-nettoyage">Vue d‚Äôensemble - Tous les √©chantillons (APR√àS nettoyage)<a class="anchor" aria-label="anchor" href="#vue-densemble---tous-les-%C3%A9chantillons-apr%C3%A8s-nettoyage"></a>
</h4>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cr√©er une comparaison de tous les √©chantillons apr√®s nettoyage</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 1 - Soja (APR√àS)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/all-samples-clean-map-1.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean_s2</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 2 - Ma√Øs (APR√àS)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/all-samples-clean-map-2.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean_s3</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 3 - Ma√Øs (APR√àS)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/all-samples-clean-map-3.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean_s4</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 4 - Ma√Øs blanc (APR√àS)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/all-samples-clean-map-4.png" class="r-plt" alt="" width="1344"></p>
</div>
<div class="section level4">
<h4 id="cartes-de-densit√©---comparaison-avantapr√®s">Cartes de densit√© - Comparaison AVANT/APR√àS<a class="anchor" aria-label="anchor" href="#cartes-de-densit%C3%A9---comparaison-avantapr%C3%A8s"></a>
</h4>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cr√©er des cartes de densit√© pour visualiser la distribution spatiale</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sample 1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 1 - Soja (AVANT)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/density-maps-1.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 1 - Soja (APR√àS)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/density-maps-2.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Sample 2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw_s2</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 2 - Ma√Øs (AVANT)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/density-maps-3.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean_s2</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 2 - Ma√Øs (APR√àS)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/density-maps-4.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Sample 3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw_s3</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 3 - Ma√Øs (AVANT)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/density-maps-5.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean_s3</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 3 - Ma√Øs (APR√àS)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/density-maps-6.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Sample 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_raw_s4</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 4 - Ma√Øs blanc (AVANT)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/density-maps-7.png" class="r-plt" alt="" width="1344"></p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sf_clean_s4</span><span class="op">[</span><span class="st">"Yield_kg_ha"</span><span class="op">]</span>, main <span class="op">=</span> <span class="st">"Sample 4 - Ma√Øs blanc (APR√àS)"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.3</span>, breaks <span class="op">=</span> <span class="st">"jenks"</span>, key.pos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/density-maps-8.png" class="r-plt" alt="" width="1344"></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="visualisations-comparatives">Visualisations comparatives<a class="anchor" aria-label="anchor" href="#visualisations-comparatives"></a>
</h2>
<div class="section level3">
<h3 id="distribution-des-rendements">Distribution des rendements<a class="anchor" aria-label="anchor" href="#distribution-des-rendements"></a>
</h3>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cr√©er les donn√©es pour les histogrammes</span></span>
<span><span class="va">samples_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Sample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sample 1 (Soja)"</span>, <span class="st">"Sample 2 (Ma√Øs)"</span>, <span class="st">"Sample 3 (Ma√Øs)"</span>, <span class="st">"Sample 4 (Ma√Øs blanc)"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>  Type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Brut"</span>, <span class="st">"Nettoy√©"</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  Rendement <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3517</span>, <span class="fl">3596</span>, <span class="fl">5294</span>, <span class="fl">5224</span>, <span class="fl">7912</span>, <span class="fl">7854</span>, <span class="fl">8119</span>, <span class="fl">8202</span><span class="op">)</span>,</span>
<span>  CV <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">24.8</span>, <span class="fl">18.3</span>, <span class="fl">96.1</span>, <span class="fl">44.3</span>, <span class="fl">89.2</span>, <span class="fl">60.1</span>, <span class="fl">32.4</span>, <span class="fl">30.3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Graphique comparatif</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">samples_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Sample</span>, y <span class="op">=</span> <span class="va">Rendement</span>, fill <span class="op">=</span> <span class="va">Type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Brut"</span> <span class="op">=</span> <span class="st">"#e74c3c"</span>, <span class="st">"Nettoy√©"</span> <span class="op">=</span> <span class="st">"#27ae60"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Comparaison des rendements moyens"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Avant et apr√®s nettoyage AYCE"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Rendement (kg/ha)"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/comparison-histograms-1.png" class="r-plt" alt="" width="1344"></p>
</div>
<div class="section level3">
<h3 id="coefficient-de-variation">Coefficient de variation<a class="anchor" aria-label="anchor" href="#coefficient-de-variation"></a>
</h3>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">samples_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Sample</span>, y <span class="op">=</span> <span class="va">CV</span>, fill <span class="op">=</span> <span class="va">Type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Brut"</span> <span class="op">=</span> <span class="st">"#e74c3c"</span>, <span class="st">"Nettoy√©"</span> <span class="op">=</span> <span class="st">"#27ae60"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"√âvolution du coefficient de variation (CV)"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"R√©duction de la variabilit√© apr√®s nettoyage"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"CV (%)"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/cv-comparison-1.png" class="r-plt" alt="" width="1152"></p>
</div>
<div class="section level3">
<h3 id="taux-de-r√©tention">Taux de r√©tention<a class="anchor" aria-label="anchor" href="#taux-de-r%C3%A9tention"></a>
</h3>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">retention_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Sample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sample 1\n(Soja)"</span>, <span class="st">"Sample 2\n(Ma√Øs)"</span>, <span class="st">"Sample 3\n(Ma√Øs)"</span>, <span class="st">"Sample 4\n(Ma√Øs blanc)"</span><span class="op">)</span>,</span>
<span>  Retention <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">95.9</span>, <span class="fl">89.7</span>, <span class="fl">94.1</span>, <span class="fl">96.1</span><span class="op">)</span>,</span>
<span>  Removed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.1</span>, <span class="fl">10.3</span>, <span class="fl">5.9</span>, <span class="fl">3.9</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">retention_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Sample</span>, y <span class="op">=</span> <span class="va">Retention</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, fill <span class="op">=</span> <span class="st">"#3498db"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">Retention</span>, <span class="st">"%"</span><span class="op">)</span><span class="op">)</span>, vjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Taux de r√©tention des donn√©es"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Pourcentage de points conserv√©s apr√®s nettoyage"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"R√©tention (%)"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="guide-complet-samples_files/figure-html/retention-plot-1.png" class="r-plt" alt="" width="960"></p>
</div>
</div>
<div class="section level2">
<h2 id="analyse-des-filtres">Analyse des filtres<a class="anchor" aria-label="anchor" href="#analyse-des-filtres"></a>
</h2>
<div class="section level3">
<h3 id="filtre-delay-adjustment">Filtre Delay Adjustment<a class="anchor" aria-label="anchor" href="#filtre-delay-adjustment"></a>
</h3>
<p>Le filtre Delay Adjustment corrige le d√©lai entre la mesure du flux
et la position GPS. Voici les d√©lais optimaux d√©tect√©s :</p>
<ul>
<li>
<strong>Sample 1 (Soja)</strong> : 2 secondes</li>
<li>
<strong>Sample 2 (Ma√Øs)</strong> : 13 secondes</li>
<li>
<strong>Sample 3 (Ma√Øs)</strong> : 0 secondes (pas de correction
n√©cessaire)</li>
<li>
<strong>Sample 4 (Ma√Øs blanc)</strong> : 0 secondes (pas de
correction n√©cessaire)</li>
</ul>
<p>Le d√©lai de 13 secondes pour le Sample 2 indique un probl√®me
important de synchronisation entre le capteur de flux et le GPS.</p>
</div>
<div class="section level3">
<h3 id="filtre-de-vitesse">Filtre de vitesse<a class="anchor" aria-label="anchor" href="#filtre-de-vitesse"></a>
</h3>
<p>Les seuils de vitesse calcul√©s automatiquement :</p>
<table class="table">
<thead><tr class="header">
<th>Sample</th>
<th>Vitesse min</th>
<th>Vitesse max</th>
<th>Points retir√©s</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Sample 1</td>
<td>0.5 m/s</td>
<td>2.89 m/s</td>
<td>29</td>
</tr>
<tr class="even">
<td>Sample 2</td>
<td>0.5 m/s</td>
<td>4.38 m/s</td>
<td>366</td>
</tr>
<tr class="odd">
<td>Sample 3</td>
<td>0.5 m/s</td>
<td>5.12 m/s</td>
<td>490</td>
</tr>
<tr class="even">
<td>Sample 4</td>
<td>0.5 m/s</td>
<td>9.72 m/s</td>
<td>539</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="filtre-dhumidit√©">Filtre d‚Äôhumidit√©<a class="anchor" aria-label="anchor" href="#filtre-dhumidit%C3%A9"></a>
</h3>
<p>Les plages d‚Äôhumidit√© accept√©es (moyenne ¬± 3 √©carts-types) :</p>
<table class="table">
<thead><tr class="header">
<th>Sample</th>
<th>Humidit√© min</th>
<th>Humidit√© max</th>
<th>Points retir√©s</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Sample 1</td>
<td>7.9%</td>
<td>11.3%</td>
<td>303</td>
</tr>
<tr class="even">
<td>Sample 2</td>
<td>16.1%</td>
<td>23.3%</td>
<td>153</td>
</tr>
<tr class="odd">
<td>Sample 3</td>
<td>11.3%</td>
<td>26.9%</td>
<td>425</td>
</tr>
<tr class="even">
<td>Sample 4</td>
<td>16.7%</td>
<td>27.3%</td>
<td>210</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>L‚Äôanalyse des 4 √©chantillons montre l‚Äôefficacit√© du pipeline AYCE
:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Taux de r√©tention √©lev√©</strong> : 89.7% √† 96.1% des points
conserv√©s</li>
<li>
<strong>R√©duction significative du CV</strong> : Diminution de 24% √†
54% selon les √©chantillons</li>
<li>
<strong>D√©tection automatique des probl√®mes</strong> : Delay
Adjustment identifie les d√©lais de synchronisation</li>
<li>
<strong>Filtrage cibl√©</strong> : Chaque filtre cible un type
sp√©cifique d‚Äôanomalie</li>
</ol>
<p>Le Sample 2 (ma√Øs) pr√©sente le taux de rejet le plus √©lev√© (10.3%) en
raison d‚Äôun d√©lai de delay adjustment important (13 secondes) et de
nombreuses anomalies de vitesse. Les autres √©chantillons montrent une
qualit√© de donn√©es initiale meilleure avec des taux de r√©tention
sup√©rieurs √† 94%.</p>
<p>Pour plus de d√©tails sur les filtres individuels, consultez les
articles math√©matiques d√©di√©s :</p>
<ul>
<li>
<code>vignettes("filtre-delai")</code> - Th√©orie et math√©matiques du
Delay Adjustment</li>
<li>
<code>vignettes("filtre-vitesse")</code> - Filtre de vitesse</li>
<li>
<code>vignettes("filtre-rendement")</code> - Filtre de plage de
rendement</li>
<li>
<code>vignettes("filtre-humidite")</code> - Filtre d‚Äôhumidit√©</li>
<li>
<code>vignettes("filtre-chevauchement")</code> - Filtre de
chevauchement</li>
<li>
<code>vignettes("filtre-ecart-type-local")</code> - Filtre
d‚Äô√©cart-type local</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cedric Bouffard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
