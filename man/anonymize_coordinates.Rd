% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/anonymize_coordinates.R
\name{anonymize_coordinates}
\alias{anonymize_coordinates}
\title{Anonymiser les coordonnées GPS des données de rendement}
\usage{
anonymize_coordinates(
  data,
  output_key_file = NULL,
  password = NULL,
  algorithm = "aes-256-gcm",
  random_seed = NULL,
  coordinate_system = "latlon",
  utm_zone = NULL,
  return_full_key = FALSE
)
}
\arguments{
\item{data}{Tibble ou data.frame contenant les colonnes Latitude et Longitude}

\item{output_key_file}{Chemin du fichier où sauvegarder la clé de décalage chiffrée.
Si NULL, la clé est retournée dans l'objet résultat mais pas sauvegardée.}

\item{password}{Mot de passe pour chiffrer/déchiffrer le fichier de clé.
Si NULL, une clé aléatoire est générée et retournée (non chiffrée).}

\item{algorithm}{Algorithme de chiffrement à utiliser. Options: "aes-256-gcm" (défaut),
"aes-256-cbc", "chacha20". Voir \code{\link[openssl:rsa_encrypt]{openssl::encrypt()}} pour les options.}

\item{random_seed}{Graine aléatoire pour la reproductibilité (optionnel).
Si NULL, utilise une graine aléatoire.}

\item{coordinate_system}{Système de coordonnées à utiliser pour le décalage.
Options: "latlon" (défaut) pour Latitude/Longitude, "utm" pour coordonnées UTM.}

\item{utm_zone}{Zone UTM si coordinate_system = "utm". Auto-détectée si NULL.}

\item{return_full_key}{Si TRUE, retourne la clé complète dans le résultat (défaut: FALSE
pour ne pas exposer accidentellement la clé).}
}
\value{
Une liste contenant:
\itemize{
\item \code{data}: Les données avec coordonnées anonymisées
\item \code{key_file}: Chemin du fichier de clé chiffrée (si sauvegardé)
\item \code{offset}: Le décalage appliqué (lat_offset, lon_offset ou x_offset, y_offset)
\item \code{reference_point}: Le point de référence original (si return_full_key = TRUE)
\item \code{metadata}: Métadonnées sur l'anonymisation (timestamp, méthode, etc.)
}
}
\description{
Cette fonction déplace les coordonnées GPS (Latitude/Longitude) en les décalant
selon un point de référence choisi aléatoirement. Le point de référence est
sauvegardé dans un fichier chiffré pour permettre la réversibilité si nécessaire.
}
\details{
La méthode d'anonymisation choisie consiste à:
\enumerate{
\item Sélectionner un point de référence aléatoire dans les données
\item Calculer un décalage pour que ce point devienne l'origine (0,0) ou un point fixe
\item Appliquer ce décalage à toutes les coordonnées
\item Sauvegarder le point de référence et le décalage dans un fichier chiffré
}

Cette approche permet:
\itemize{
\item L'anonymisation: les coordonnées absolues sont perdues
\item La réversibilité: avec la clé, on peut retrouver les coordonnées originales
\item La cohérence: toutes les données du même champ ont le même décalage
}
}
\section{Sécurité}{

Le fichier de clé est chiffré avec AES-256-GCM par défaut, qui offre:
\itemize{
\item Confidentialité: les données sont illisibles sans le mot de passe
\item Authenticité: détection de toute modification du fichier
}

Pour une sécurité maximale:
\itemize{
\item Utilisez un mot de passe fort (12+ caractères, mixte)
\item Stockez le fichier de clé séparément des données
\item Ne partagez jamais le mot de passe et le fichier de clé ensemble
}
}

\examples{
\dontrun{
# Créer des données d'exemple
data <- tibble::tibble(
  Latitude = c(47.506122, 47.506136, 47.506152),
  Longitude = c(-69.856661, -69.856681, -69.856701),
  Flow = c(1.53, 3.7, 7.56)
)

# Anonymiser avec sauvegarde de clé chiffrée
result <- anonymize_coordinates(
  data,
  output_key_file = "reference_key.enc",
  password = "mon_mot_de_passe_securise"
)

# Données anonymisées
anonymized_data <- result$data

# Restaurer les coordonnées originales
restored <- restore_coordinates(
  anonymized_data,
  key_file = "reference_key.enc",
  password = "mon_mot_de_passe_securise"
)
}

}
\seealso{
\code{\link[=restore_coordinates]{restore_coordinates()}} pour restaurer les coordonnées originales
}
